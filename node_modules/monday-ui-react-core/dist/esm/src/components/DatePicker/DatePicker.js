import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import n,{forwardRef as a,useState as r,useCallback as i}from"react";import o from"classnames";import s from"moment";import"react-dates/initialize";import"react-dates/lib/css/_datepicker.css";import{DayPickerRangeController as d,DayPickerSingleDateController as c}from"react-dates";import l from"./DatePickerHeader/DatePickerHeader.js";import m from"./DateNavigationItem/DateNavigationItem.js";import u from"./YearPicker/YearPicker.js";import{WEEK_FIRST_DAY as f,DAY_SIZE as D}from"./constants.js";import{FocusInput as v,Direction as k}from"./types.js";import{getTestId as h}from"../../tests/testIds.js";import{ComponentDefaultTestId as E}from"../../tests/constants.js";import{NOOP as p}from"../../utils/function-utils.js";import y from"./DatePicker.module.scss.js";var g=a((function(a,g){var b=a.id,P=a.className,N=a.firstDayOfWeek,O=void 0===N?f:N,j=a.daySize,C=void 0===j?D:j,M=a.range,I=void 0!==M&&M,S=a.shouldBlockDay,W=a.shouldBlockYear,Y=a.numberOfMonths,B=void 0===Y?1:Y,K=a.hideNavigationKeys,R=void 0!==K&&K,A=a.date,T=a.endDate,_=a.onPickDate,x=a.enableOutsideDays,z=void 0!==x&&x,H=a.showWeekNumber,F=void 0!==H&&H,w=a.shouldBlockRange,V=a["data-testid"],L=r(v.startDate),q=e(L,2),G=q[0],J=q[1],Q=r(!1),U=e(Q,2),X=U[0],Z=U[1],$=r(null),ee=e($,2),te=ee[0],ne=ee[1],ae=i((function(e){var t=e.month;return n.createElement(l,{"data-testid":V||h(E.DATEPICKER_HEADER,b),currentDate:t||s(),isMonthYearSelection:X,onToggleMonthYearPicker:function(){return Z((function(e){return!e}))},hideNavigationKeys:R})}),[V,X,R,b]),re=i((function(e){var t=0===O?e.clone().add(1,"d").isoWeek():e.isoWeek();return n.createElement(n.Fragment,null,n.createElement("span",{className:y.calendarDayWeekNumber},t)," ",e.format("D"))}),[O]),ie=i((function(e){ne(e),Z(!1)}),[]),oe=i((function(){return n.createElement(u,{"data-testid":V||h(E.DATEPICKER_YEAR_SELECTION,b),selectedDate:A,isYearBlocked:W,changeCurrentDate:ie})}),[V,W,ie,A,b]),se=i((function(e){_&&_(G===v.startDate?Object.assign(Object.assign({},e),{endDate:null}):e)}),[G,_]),de=i((function(e){J(e||v.startDate)}),[]),ce=!R&&!X;return n.createElement("div",{"data-testid":V||h(E.DATEPICKER,b),ref:g,id:b,className:o(y.datepickerContainer,P,t(t(t({},y.withWeekNumber,F),y.rangePickerMode,I),y.monthYearSelection,X))},I?n.createElement(d,{key:"".concat(null==te?void 0:""+te),renderDayContents:F?re:void 0,firstDayOfWeek:O,hideKeyboardShortcutsPanel:!0,startDate:A,endDate:T,onDatesChange:se,focusedInput:G,minimumNights:0,onFocusChange:de,navPrev:ce?n.createElement(m,{kind:k.prev}):n.createElement("div",null),navNext:ce?n.createElement(m,{kind:k.next}):n.createElement("div",null),daySize:C,isOutsideRange:w,isDayBlocked:S,renderMonthElement:ae,enableOutsideDays:z||F,numberOfMonths:B,initialVisibleMonth:function(){return te||A||s()}}):n.createElement(c,{key:"".concat(null==te?void 0:""+te),renderDayContents:F?re:void 0,firstDayOfWeek:O,hideKeyboardShortcutsPanel:!0,onFocusChange:p,numberOfMonths:B,date:A,onDateChange:function(e){return _(e)},navPrev:ce?n.createElement(m,{kind:k.prev}):n.createElement("div",null),navNext:ce?n.createElement(m,{kind:k.next}):n.createElement("div",null),focused:!0,renderMonthElement:ae,enableOutsideDays:z||F,daySize:C,isDayBlocked:S,initialVisibleMonth:function(){return te||A||s()}}),X&&oe())}));export{g as default};
//# sourceMappingURL=DatePicker.js.map
