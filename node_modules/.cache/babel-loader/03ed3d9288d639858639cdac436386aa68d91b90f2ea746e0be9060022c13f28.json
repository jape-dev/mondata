{"ast":null,"code":"var _jsxFileName = \"/Users/jamespatten/Documents/repos/mondata/src/Screens/Connector.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState, useMemo } from \"react\";\nimport \"../App.css\";\nimport mondaySdk from \"monday-sdk-js\";\nimport \"monday-ui-react-core/dist/main.css\";\nimport { Dropdown, Button } from \"monday-ui-react-core\";\nimport Nango from \"@nangohq/frontend\";\nimport { FacebookService } from \"../api\";\n\n// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst monday = mondaySdk();\nexport const Connector = () => {\n  _s();\n  const [connector, setConnector] = useState();\n  const [user, setUser] = useState();\n  const getIconUrl = imgPath => {\n    return require(`../Static/images/${imgPath}.png`);\n  };\n  const options = useMemo(() => [{\n    value: \"facebook\",\n    label: \"Facebook\",\n    leftAvatar: getIconUrl(\"facebook-icon\")\n  }, {\n    value: \"instagram\",\n    label: \"Instagram\",\n    leftAvatar: getIconUrl(\"instagram-icon\")\n  }, {\n    value: \"google\",\n    label: \"Google Ads\",\n    leftAvatar: getIconUrl(\"google-ads-icon\")\n  }, {\n    value: \"google-analytics\",\n    label: \"Google Analytics\",\n    leftAvatar: getIconUrl(\"google-analytics-icon\")\n  }], []);\n  async function getSessionToken() {\n    return (await monday.get(\"sessionToken\")).data;\n  }\n  async function updateUser(token) {\n    const sessionToken = await getSessionToken();\n    const requestBody = {\n      scheme: \"Bearer\",\n      credentials: sessionToken\n    };\n    console.log(requestBody);\n    FacebookService.facebookLogin(token, requestBody).then(user => {\n      setUser(user);\n    });\n  }\n  const nango = new Nango({\n    publicKey: \"7b73b776-3a10-41c0-a5ee-feef16d372d4\"\n  });\n  const connect = () => {\n    if (connector === \"facebook\") {\n      nango.auth(\"facebook\", \"test-connection-id\", {\n        authorization_params: {\n          config_id: \"728465868571401\"\n        }\n      }).then(result => {\n        updateUser(result.providerConfigKey);\n        // save id to the database.\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border border-grey rounded-md\",\n    children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n      placeholder: \"Select an application\",\n      options: options,\n      onOptionSelect: e => setConnector(e.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-gret rounded-md p-10 m-10\",\n      children: user.facebook_token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-gret rounded-md p-10 m-10\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n          placeholder: \"Select an account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          placeholder: \"Select a date range\",\n          options: [\"Last 7 days\", \"Last 30 days\", \"Last 90 days\", \"Last 365 days\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          placeholder: \"Select fields\",\n          multi: true,\n          multiline: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => connect(),\n        className: \"mt-2\",\n        children: \"Connect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n_s(Connector, \"DXWKE64y3uG3va2FIs7W6YvyTtA=\");\n_c = Connector;\nvar _c;\n$RefreshReg$(_c, \"Connector\");","map":{"version":3,"names":["React","useState","useMemo","mondaySdk","Dropdown","Button","Nango","FacebookService","jsxDEV","_jsxDEV","Fragment","_Fragment","monday","Connector","_s","connector","setConnector","user","setUser","getIconUrl","imgPath","require","options","value","label","leftAvatar","getSessionToken","get","data","updateUser","token","sessionToken","requestBody","scheme","credentials","console","log","facebookLogin","then","nango","publicKey","connect","auth","authorization_params","config_id","result","providerConfigKey","catch","err","className","children","placeholder","onOptionSelect","e","fileName","_jsxFileName","lineNumber","columnNumber","facebook_token","multi","multiline","onClick","_c","$RefreshReg$"],"sources":["/Users/jamespatten/Documents/repos/mondata/src/Screens/Connector.tsx"],"sourcesContent":["import React from \"react\";\nimport { useState, useMemo } from \"react\";\nimport \"../App.css\";\nimport mondaySdk from \"monday-sdk-js\";\nimport \"monday-ui-react-core/dist/main.css\";\nimport { Dropdown, Button } from \"monday-ui-react-core\";\nimport Nango from \"@nangohq/frontend\";\nimport {\n  FacebookService,\n  HTTPAuthorizationCredentials,\n  UserUpdate,\n} from \"../api\";\n\n// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nconst monday = mondaySdk();\n\nexport const Connector = () => {\n  const [connector, setConnector] = useState();\n  const [user, setUser] = useState<UserUpdate>();\n\n  const getIconUrl = (imgPath: string) => {\n    return require(`../Static/images/${imgPath}.png`);\n  };\n\n  const options = useMemo(\n    () => [\n      {\n        value: \"facebook\",\n        label: \"Facebook\",\n        leftAvatar: getIconUrl(\"facebook-icon\"),\n      },\n      {\n        value: \"instagram\",\n        label: \"Instagram\",\n        leftAvatar: getIconUrl(\"instagram-icon\"),\n      },\n      {\n        value: \"google\",\n        label: \"Google Ads\",\n        leftAvatar: getIconUrl(\"google-ads-icon\"),\n      },\n      {\n        value: \"google-analytics\",\n        label: \"Google Analytics\",\n        leftAvatar: getIconUrl(\"google-analytics-icon\"),\n      },\n    ],\n    []\n  );\n\n  async function getSessionToken() {\n    return (await monday.get(\"sessionToken\")).data;\n  }\n\n  async function updateUser(token: string) {\n    const sessionToken = await getSessionToken();\n\n    const requestBody: HTTPAuthorizationCredentials = {\n      scheme: \"Bearer\",\n      credentials: sessionToken,\n    };\n\n    console.log(requestBody);\n\n    FacebookService.facebookLogin(token, requestBody).then(\n      (user: UserUpdate) => {\n        setUser(user);\n      }\n    );\n  }\n\n  const nango = new Nango({\n    publicKey: \"7b73b776-3a10-41c0-a5ee-feef16d372d4\",\n  });\n\n  const connect = () => {\n    if (connector === \"facebook\") {\n      nango\n        .auth(\"facebook\", \"test-connection-id\", {\n          authorization_params: { config_id: \"728465868571401\" },\n        })\n        .then((result) => {\n          updateUser(result.providerConfigKey);\n          // save id to the database.\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n\n  return (\n    <div className=\"border border-grey rounded-md\">\n      <Dropdown\n        placeholder=\"Select an application\"\n        options={options}\n        onOptionSelect={(e: any) => setConnector(e.value)}\n      />\n      {user ? (\n        <div className=\"border border-gret rounded-md p-10 m-10\">\n          {user.facebook_token}\n        </div>\n      ) : (\n        <>\n          <div className=\"border border-gret rounded-md p-10 m-10\">\n            <Dropdown placeholder=\"Select an account\" />\n            <Dropdown\n              placeholder=\"Select a date range\"\n              options={[\n                \"Last 7 days\",\n                \"Last 30 days\",\n                \"Last 90 days\",\n                \"Last 365 days\",\n              ]}\n            />\n            <Dropdown placeholder=\"Select fields\" multi multiline />\n          </div>\n          <Button onClick={() => connect()} className=\"mt-2\">\n            Connect\n          </Button>\n        </>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}